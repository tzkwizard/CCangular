<section class="mainbar" data-ng-controller="els as vm">
    <section class="matter">
        <div class="container-fluid">
            <div class="row-fluid">
                <!--<span class="span3">
                    <input class="input-block-level" data-ng-model="vm.fi" type="text">
                </span>&nbsp;-->
            </div>
            <div class="input-append row-fluid">
                <input type="text" class="form-control"
                       data-ng-model="searchText"
                       placeholder="  Search"/>
                <button class="btn btn-info btn-notext" type="button" data-ng-click="vm.search(searchText)">
                    <i class="fa fa-search"> Search </i>
                </button>
                <select ng-model="vm.aggName" class="input-medium">
                    <option selected value="all">all</option>
                    <option selected value="ip">ip</option>
                    <option selected vaule="username">username</option>
                    <option selected vaule="response">response</option>
                    <option selected vaule="message">message</option>
                </select>
                <button data-ng-click="vm.changev(vm.aggName)" class="btn btn-info btn-notext" type="button">
                    <i class="fa fa-pie-chart">Show</i>
                </button>
                <input type="text" size="8"
                       data-ng-model="vm.fi"
                       placeholder="  Filter "/>
                <select ng-model="vm.filterAggName" class="input-medium">
                    <option selected value="all">all</option>
                    <option selected value="ip">ip</option>
                    <option selected vaule="username">username</option>
                    <option selected vaule="response">response</option>
                    <option selected vaule="message">message</option>
                </select>
                <button data-ng-click="vm.test(searchText)" class="btn btn-info btn-notext" type="button">
                    <i class="fa fa-pie-chart">Test</i>
                </button>
            </div>
            <select ng-model="vm.pagecount" class="input-medium">
                <option selected value=10>10</option>
                <option selected value=25>25</option>
                <option selected vaule=50>50</option>
                <option selected vaule=100>100</option>
            </select>
            <div google-chart="PieChart" data-ng-model="data1" class="bigGraph"></div>
            <div google-chart="BarChart" ng-model="data2" class="mediumGraph"></div>
            <div google-chart="LineChart" ng-model="data3" class="smallGraph"></div>
            <div id="dashboard_div">
                <!--Divs that will hold each control and chart-->
                <table class="columns">
                    <tr>
                        <td>
                            <div id="filter_div"></div>
                            <div id="chart_div" class="bigGraph"></div>
                        </td>
                        <td>
                            <div id="chart2"></div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="row-fluid">
                  <div class="widget wgreen">
                      <div data-cc-widget-header title="{{vm.title}}"
                           subtitle="{{vm.total}} / {{vm.total}}"
                           right-text="Page {{vm.paging.currentPage}} of {{vm.paging.pageCount}}"></div>
                    </div>
                  <div data-ng-repeat="doc in vm.hits.buckets" data-ng-style="vm.mystyle">
                    <h2>key: {{doc.key}} --- count: {{doc.doc_count}}</h2>
                </div>
                </div>
        </div>
        <!-- <div data-ng-repeat="doc in vm.hitSearch">
            {{doc._source.ip}} <br>

        </div>-->

        <table class="table table-striped table-condensed table-hover">
            <thead>

            <tr>
                <th class="ip" custom-sort order="'ip'" sort="sort">Ip&nbsp;</th>
                <th class="username" custom-sort order="'username'" sort="sort">UserName&nbsp;</th>
                <th class="response" custom-sort order="'response'" sort="sort">Response&nbsp;</th>
                <th class="message" custom-sort order="'message'" sort="sort">Message&nbsp;</th>
                <th class="message" custom-sort order="'_score'" sort="sort">_score&nbsp;</th>
                <th class="message" custom-sort order="'index'" sort="sort">Index&nbsp;</th>
            </tr>
            </thead>
            <tfoot>
            <td colspan="6">
                <div class="pagination pull-right">
                    <ul>
                        <li ng-class="{disabled: currentPage == 0}">
                            <a href ng-click="prevPage()">« Prev</a>
                        </li>

                        <li ng-repeat="n in range(pagedItems.length, currentPage, currentPage + gap) "
                            ng-class="{active: n == currentPage}"
                            ng-click="setPage()">
                            <a href ng-bind="n + 1">1</a>
                        </li>

                        <li ng-class="{disabled: (currentPage) == pagedItems.length - 1}">
                            <a href ng-click="nextPage()">Next »</a>
                        </li>
                    </ul>
                </div>
            </td>
            </tfoot>


            <tbody>
            <tr data-ng-repeat="doc in vm.res | orderBy:sort.sortingOrder:sort.reverse" data-ng-click="vm.test(searchText)">
                <td>{{doc._source.ip}}</td>
                <td>{{doc._source.username}}</td>
                <td>{{doc._source.response}}</td>
                <td>{{doc._source.message}}</td>
                <td>{{doc._score}}</td>
                <td>{{doc._index}}</td>
            </tr>
            </tbody>
        </table>

        <div class="widget-foot">
            <div class="clearfix"></div>
            <pagination boundary-links="true"
                        total-items="vm.total"
                        items-per-page="vm.paging.pageSize"
                        data-ng-model="vm.paging.currentPage"
                        data-ng-change="vm.pageChanged()"
                        max-size="vm.paging.maxPagesToShow"
                        class="pagination-sm"
                        previous-text="Prev"
                        next-text="Next"
                        first-text="First"
                        last-text="Last"></pagination>
            <div class="clearfix"></div>
        </div>
        <div data-ng-repeat="doc in vm.hitSearch" >
            {{doc.full_name}}
            {{doc.mapping}}
       <!--     <input type="button" value="选择" onclick=" f() "/>-->
        </div>
        
    </section>
</section>
<script type="text/javascript">
    function f(doc) {
       if (doc.mapping === "")
           alert(doc.full_name);
        alert("haha");
       // return "haha";
}</Script>